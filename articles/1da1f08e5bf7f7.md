---
title: "ユニケージを簡単に開発しよう"
emoji: "😽"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["bash", "VSCode"]
published: true
---

:::message
この記事はUSP, IT基礎力講座受験生向けです。
:::


## TL;DR
- VSCodeでSSHできないから記事を見て
- スニペットの登録

https://qiita.com/1Kano/items/98b3b64edf25af8e931d


## はじめに

おつかれさまです。
試験二回目の朝に思い立って書きます。

この記事ではVSCodeの環境構築方法とより簡単に書くためにしたことをまとめています。

第一回目の試験が終了し、あまり試験を受けている人が多くないかなーと思い、この記事の作成意義を感じました。

Vimに慣れていてもCUIだけだと大きめな開発ではなかなか不便であったり、やはりGUIにしかできないこともあるので、個人的にアプリケーション開発ではVSCodeの方が使うことが多いと思います。

もしかしたらあの参考書ではVimについて書かれているのでVSCodeは非推奨かもしれませんが、まあいいでしょう。

基本的に他の方が説明しているので具体的にはそれらの方の記事を読んでください。（ありがとうございます）
VSCodeで簡単に開発するアイデア集程度に思っていただけたら大丈夫です。


## 手順

大きく分けて
1. VSCodeでのSSH接続
2. スニペット設定

この二本立てです。

慣れているならすぐできると思うのですが、つまずいたところもあるのでそれをまとめます。

###  VSCodeのSSH接続

これは僕以外にもやった人はいるのではないでしょうか？

VSCodeの拡張機能でSSH接続し、ファイル操作や編集、VSCodeの拡張機能を利用しデバッグやビルドをGUIで行うことができます。便利ですね

https://qiita.com/nlog2n2/items/1d1358f6913249f3e186

基本的な接続方法はいろんな方が方法を挙げているのでそれを見ていただきたいのですが、ここではつまずいたところをかいつまんで残します。

普通に設定して接続しようとするとこのような画面が表示されると思います。僕は始めて見ました。

![](https://storage.googleapis.com/zenn-user-upload/e129f9c1e2b9-20250913.png)

```
[06:37:13.130] [LinuxPrereqs]: リモート ホストは、glibc および libstdc++ の VS Code Server の前提条件を満たしていない可能性があります (リモート ホストは、VS Code Server を実行するための前提条件を満たしていません)
```

とのことです。

どうやら数年前のVSCodeのアップデートで古いLinuxサーバにはアクセスできなくなったようで、具体的にはglibcが悪いらしい、

解決方法は過去バージョンを入れることですが、脆弱性等あれば危険なのであまりお勧めはできないかもしれないです。（エディターだからそんなにだと思うけど）

https://qiita.com/1Kano/items/98b3b64edf25af8e931d

この記事ではZIPファイルから直接実行していますが、僕のPCでは起動できなかったので、直接インストールしました。
VSCodeのインストーラーはすでに入っているバージョンをリプレースするのでそのままインストールしちゃって大丈夫です。

僕はこのページ↓からダウンロードしました。

https://code.visualstudio.com/updates/v1_93

![](https://storage.googleapis.com/zenn-user-upload/e0305e1e6538-20250913.png =600x)

赤丸からダウンロード、おそらくメインPCはWindowsが多いと思います。

![](https://storage.googleapis.com/zenn-user-upload/98324c2e884f-20250913.png =600x)

画面左側の拡張機能設定画面からRemote - SSHにあるプレスリリースバージョンへの切り替え、みたいなやつを押しといてください。
ほかにもバージョン切り替えたことによって使えなくなってる拡張機能があるかもしれないので、そのボタンをポチポチしてみてください。

また、settingsから自動アップデートをnoneにすることで起動時に自動でアップデートされることを防ぎます。

![](https://storage.googleapis.com/zenn-user-upload/6568f660c18b-20250913.png =600x)



### スニペット設定

いわゆるアプリケーション作成問題にある、『お作法』への対策になるかと思います。

シバン、作成日時、作成者、エラーハンドラー、、、
いろいろあるのに毎ファイルそれを考えてコピペコピペするのは大変です。

スニペット機能を使って簡単にしましょう。
簡単に言ったら静的なintellisense, 入力補完ができます。

本来であればbashのシェルスクリプトの拡張子は.shになるのですが（慣例）、ユニゲージでは拡張子という概念はなさそうです。
厳密にいえばLinux自体に拡張子の概念は無い（迫真）

この試験で作成する必要のあるシェルスクリプトはサフィックスがCGIとAJAXのみであるので一応それがVSCode上の拡張子となります。

https://qiita.com/12345/items/97ba616d530b4f692c97

これもスニペット登録について詳しくは他の方の記事を見ていただけたらと思います。

ファイル(F) > ユーザ設定 > スニペットの構成
新しいグローバルスニペットファイル > CGI, AJAXと入力

開いたエディタに以下をコピペし、!!!!!って打ってあるところを変えてください。

:::message alert
**免責**
このスニペットを使うときはよくコードを確認し、自分に適合しているかを十分に確認してください。
このコードが違うとすべてのスニペットが違ってきます。
いかなる不具合があっても責任はとれません。
:::


```json
{
    "pre": {
        "prefix": "pre",
        "body": [
            "#!/bin/bash -vx",
            "#",
            "# $TM_FILENAME $1",
            "#",
            "# written by !!!!!!Your Name!!!!!! (!!!!!Your eMailAddress!!!!!) $CURRENT_YEAR/$CURRENT_MONTH/$CURRENT_DATE",
            "",
            "##############################################",
            "# 変数設定",
            "export LANG=ja_JP.UTF-8",
            "export PATH=/home/UTL:/home/TOOL:\\$PATH",
            "",
            "tmp=/home/!!!!!Your UserName!!!!!!/tmp/tmp_$$",
            "",
            "##############################################",
            "# ディレクトリ",
            "homd=/home/!!!!!Your UserName!!!!!!/WEB",
            "apld=\\$homd/$WORKSPACE_NAME",
            "htmd=\\$apld/HTML",
            "",
            "##############################################",
            "# 走行ログ",
            "logd=\\$homd/LOG",
            "exec 2> \\$logd/LOG.$(basename \\$0).$(date +%Y%m%d)",
            "",
            "##############################################",
            "# エラーハンドラ",
            "ERROR_CHECK(){",
            "[ $(plus ${PIPESTATUS[@]}) -eq 0 ] && return",
            "",
            "    echo \"Content-type: text/html\"",
            "    echo \"\"",
            "    echo システムエラー",
            "",
            "    exit 1",
            "}",
            "$2"
        ]
    },
    "fin": {
        "prefix": "fin",
        "body": [
            "##############################################",
            "# 終了",
            "rm -rf \\$tmp-*",
            "exit 0",
            ""
        ]
    },
    "post": {
        "prefix": "post",
        "body": [
            "##############################################",
            "# POST データの受け取り",
            "if [ -n \"\\$CONTENT_LENGTH\" ] ; then",
            "    dd bs=\\$CONTENT_LENGTH |",
            "    cgi-name -n_ -s_ > \\$tmp-name",
            "    ERROR_CHECK",
            "else",
            "    # POST データがなければ空の name ファイルを作成",
            "    touch \\$tmp-name",
            "    ERROR_CHECK",
            "fi",
        ]
    },
    "sharp": {
        "prefix": "sharp",
        "body": [
            "##############################################",
            "$1"
        ]
    },
    "outputHTML": {
        "prefix": "html",
        "body": [
            "##############################################",
            "#画面出力",
            "echo \"Content-type:text/html\"",
            "echo \"\"",
            "cat \\$tmp-html",
            "ERROR_CHECK",
            ""
        ]
    },
    "checklog": {
        "prefix": "log",
        "body": ["cat \\$tmp-$1 > \\$logd/$2"]
    }
}   
```

#### 使い方
開発ディレクトリをVSCodeで開きます。
ちゃんと開かないとだめです！
下の例だと~/WEB/TESTを開く必要があります！

.CGI .AJAX ファイル上で先ほどのコードのprefixにあたる部分を入力しTabキーを押下するとbodyの要素が出力されます。

自分があると便利だなーって思うやつどんどん追加してみましょう

またスニペットによってはTabキーを押下した後もう一度押すとカーソルが自動で動くやつもあります。
例えば↓の例だと、preを入力後Tabキーを押下するとカーソルがプログラムの説明を記述するところに飛びます。
そのあともう一度Tabキーを押すとスニペットの下へと移動する感じです。

![](https://storage.googleapis.com/zenn-user-upload/ba128cbe141d-20250913.gif)

## おわり
みんなでがんばりましょう
質問、誤植あればZennコメント, Discord, Teamsなんでもいいです

ありがとうございます